   1              		.cpu cortex-m4
   2              		.eabi_attribute 27, 1
   3              		.eabi_attribute 28, 1
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 4
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 2
  13              		.file	"action_layer.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.section	.text.default_layer_state_set_user,"ax",%progbits
  18              		.align	1
  19              		.weak	default_layer_state_set_user
  20              		.arch armv7e-m
  21              		.syntax unified
  22              		.thumb
  23              		.thumb_func
  24              		.fpu fpv4-sp-d16
  26              	default_layer_state_set_user:
  27              	.LVL0:
  28              	.LFB3:
  29              		.file 1 "tmk_core/common/action_layer.c"
   1:tmk_core/common/action_layer.c **** #include <stdint.h>
   2:tmk_core/common/action_layer.c **** #include "keyboard.h"
   3:tmk_core/common/action_layer.c **** #include "action.h"
   4:tmk_core/common/action_layer.c **** #include "util.h"
   5:tmk_core/common/action_layer.c **** #include "action_layer.h"
   6:tmk_core/common/action_layer.c **** 
   7:tmk_core/common/action_layer.c **** #ifdef DEBUG_ACTION
   8:tmk_core/common/action_layer.c **** #    include "debug.h"
   9:tmk_core/common/action_layer.c **** #else
  10:tmk_core/common/action_layer.c **** #    include "nodebug.h"
  11:tmk_core/common/action_layer.c **** #endif
  12:tmk_core/common/action_layer.c **** 
  13:tmk_core/common/action_layer.c **** /** \brief Default Layer State
  14:tmk_core/common/action_layer.c ****  */
  15:tmk_core/common/action_layer.c **** layer_state_t default_layer_state = 0;
  16:tmk_core/common/action_layer.c **** 
  17:tmk_core/common/action_layer.c **** /** \brief Default Layer State Set At user Level
  18:tmk_core/common/action_layer.c ****  *
  19:tmk_core/common/action_layer.c ****  * Run user code on default layer state change
  20:tmk_core/common/action_layer.c ****  */
  21:tmk_core/common/action_layer.c **** __attribute__((weak)) layer_state_t default_layer_state_set_user(layer_state_t state) { return stat
  30              		.loc 1 21 87 view -0
  31              		.cfi_startproc
  32              		@ args = 0, pretend = 0, frame = 0
  33              		@ frame_needed = 0, uses_anonymous_args = 0
  34              		@ link register save eliminated.
  35              		.loc 1 21 89 view .LVU1
  36              		.loc 1 21 103 is_stmt 0 view .LVU2
  37 0000 7047     		bx	lr
  38              		.cfi_endproc
  39              	.LFE3:
  41              		.section	.text.default_layer_state_set_kb,"ax",%progbits
  42              		.align	1
  43              		.weak	default_layer_state_set_kb
  44              		.syntax unified
  45              		.thumb
  46              		.thumb_func
  47              		.fpu fpv4-sp-d16
  49              	default_layer_state_set_kb:
  50              	.LVL1:
  51              	.LFB4:
  22:tmk_core/common/action_layer.c **** 
  23:tmk_core/common/action_layer.c **** /** \brief Default Layer State Set At Keyboard Level
  24:tmk_core/common/action_layer.c ****  *
  25:tmk_core/common/action_layer.c ****  *  Run keyboard code on default layer state change
  26:tmk_core/common/action_layer.c ****  */
  27:tmk_core/common/action_layer.c **** __attribute__((weak)) layer_state_t default_layer_state_set_kb(layer_state_t state) { return defaul
  52              		.loc 1 27 85 is_stmt 1 view -0
  53              		.cfi_startproc
  54              		@ args = 0, pretend = 0, frame = 0
  55              		@ frame_needed = 0, uses_anonymous_args = 0
  56              		.loc 1 27 87 view .LVU4
  57              		.loc 1 27 85 is_stmt 0 view .LVU5
  58 0000 08B5     		push	{r3, lr}
  59              		.cfi_def_cfa_offset 8
  60              		.cfi_offset 3, -8
  61              		.cfi_offset 14, -4
  62              		.loc 1 27 94 view .LVU6
  63 0002 FFF7FEFF 		bl	default_layer_state_set_user
  64              	.LVL2:
  65              		.loc 1 27 131 view .LVU7
  66 0006 08BD     		pop	{r3, pc}
  67              		.cfi_endproc
  68              	.LFE4:
  70              		.section	.text.default_layer_state_set,"ax",%progbits
  71              		.align	1
  72              		.syntax unified
  73              		.thumb
  74              		.thumb_func
  75              		.fpu fpv4-sp-d16
  77              	default_layer_state_set:
  78              	.LVL3:
  79              	.LFB5:
  28:tmk_core/common/action_layer.c **** 
  29:tmk_core/common/action_layer.c **** /** \brief Default Layer State Set
  30:tmk_core/common/action_layer.c ****  *
  31:tmk_core/common/action_layer.c ****  * Static function to set the default layer state, prints debug info and clears keys
  32:tmk_core/common/action_layer.c ****  */
  33:tmk_core/common/action_layer.c **** static void default_layer_state_set(layer_state_t state) {
  80              		.loc 1 33 58 is_stmt 1 view -0
  81              		.cfi_startproc
  82              		@ args = 0, pretend = 0, frame = 0
  83              		@ frame_needed = 0, uses_anonymous_args = 0
  34:tmk_core/common/action_layer.c ****     state = default_layer_state_set_kb(state);
  84              		.loc 1 34 5 view .LVU9
  33:tmk_core/common/action_layer.c ****     state = default_layer_state_set_kb(state);
  85              		.loc 1 33 58 is_stmt 0 view .LVU10
  86 0000 08B5     		push	{r3, lr}
  87              		.cfi_def_cfa_offset 8
  88              		.cfi_offset 3, -8
  89              		.cfi_offset 14, -4
  90              		.loc 1 34 13 view .LVU11
  91 0002 FFF7FEFF 		bl	default_layer_state_set_kb
  92              	.LVL4:
  35:tmk_core/common/action_layer.c ****     debug("default_layer_state: ");
  93              		.loc 1 35 35 is_stmt 1 view .LVU12
  36:tmk_core/common/action_layer.c ****     default_layer_debug();
  94              		.loc 1 36 5 view .LVU13
  37:tmk_core/common/action_layer.c ****     debug(" to ");
  38:tmk_core/common/action_layer.c ****     default_layer_state = state;
  39:tmk_core/common/action_layer.c ****     default_layer_debug();
  40:tmk_core/common/action_layer.c ****     debug("\n");
  41:tmk_core/common/action_layer.c **** #ifdef STRICT_LAYER_RELEASE
  42:tmk_core/common/action_layer.c ****     clear_keyboard_but_mods();  // To avoid stuck keys
  43:tmk_core/common/action_layer.c **** #else
  44:tmk_core/common/action_layer.c ****     clear_keyboard_but_mods_and_keys();  // Don't reset held keys
  45:tmk_core/common/action_layer.c **** #endif
  46:tmk_core/common/action_layer.c **** }
  47:tmk_core/common/action_layer.c **** 
  48:tmk_core/common/action_layer.c **** /** \brief Default Layer Print
  49:tmk_core/common/action_layer.c ****  *
  50:tmk_core/common/action_layer.c ****  * Print out the hex value of the 32-bit default layer state, as well as the value of the highest b
  51:tmk_core/common/action_layer.c ****  */
  52:tmk_core/common/action_layer.c **** void default_layer_debug(void) { dprintf("%08lX(%u)", default_layer_state, get_highest_layer(defaul
  95              		.loc 1 52 115 view .LVU14
  37:tmk_core/common/action_layer.c ****     debug(" to ");
  96              		.loc 1 37 18 view .LVU15
  38:tmk_core/common/action_layer.c ****     default_layer_debug();
  97              		.loc 1 38 5 view .LVU16
  38:tmk_core/common/action_layer.c ****     default_layer_debug();
  98              		.loc 1 38 25 is_stmt 0 view .LVU17
  99 0006 034B     		ldr	r3, .L4
 100 0008 1860     		str	r0, [r3]
  39:tmk_core/common/action_layer.c ****     debug("\n");
 101              		.loc 1 39 5 is_stmt 1 view .LVU18
 102              		.loc 1 52 115 view .LVU19
  40:tmk_core/common/action_layer.c **** #ifdef STRICT_LAYER_RELEASE
 103              		.loc 1 40 16 view .LVU20
  44:tmk_core/common/action_layer.c **** #endif
 104              		.loc 1 44 5 view .LVU21
  46:tmk_core/common/action_layer.c **** 
 105              		.loc 1 46 1 is_stmt 0 view .LVU22
 106 000a BDE80840 		pop	{r3, lr}
 107              		.cfi_restore 14
 108              		.cfi_restore 3
 109              		.cfi_def_cfa_offset 0
  44:tmk_core/common/action_layer.c **** #endif
 110              		.loc 1 44 5 view .LVU23
 111 000e FFF7FEBF 		b	clear_keyboard_but_mods_and_keys
 112              	.LVL5:
 113              	.L5:
  44:tmk_core/common/action_layer.c **** #endif
 114              		.loc 1 44 5 view .LVU24
 115 0012 00BF     		.align	2
 116              	.L4:
 117 0014 00000000 		.word	.LANCHOR0
 118              		.cfi_endproc
 119              	.LFE5:
 121              		.section	.text.default_layer_debug,"ax",%progbits
 122              		.align	1
 123              		.global	default_layer_debug
 124              		.syntax unified
 125              		.thumb
 126              		.thumb_func
 127              		.fpu fpv4-sp-d16
 129              	default_layer_debug:
 130              	.LFB6:
 131              		.loc 1 52 32 is_stmt 1 view -0
 132              		.cfi_startproc
 133              		@ args = 0, pretend = 0, frame = 0
 134              		@ frame_needed = 0, uses_anonymous_args = 0
 135              		@ link register save eliminated.
 136              		.loc 1 52 115 view .LVU26
 137              		.loc 1 52 117 is_stmt 0 view .LVU27
 138 0000 7047     		bx	lr
 139              		.cfi_endproc
 140              	.LFE6:
 142              		.section	.text.default_layer_set,"ax",%progbits
 143              		.align	1
 144              		.global	default_layer_set
 145              		.syntax unified
 146              		.thumb
 147              		.thumb_func
 148              		.fpu fpv4-sp-d16
 150              	default_layer_set:
 151              	.LVL6:
 152              	.LFB7:
  53:tmk_core/common/action_layer.c **** 
  54:tmk_core/common/action_layer.c **** /** \brief Default Layer Set
  55:tmk_core/common/action_layer.c ****  *
  56:tmk_core/common/action_layer.c ****  * Sets the default layer state.
  57:tmk_core/common/action_layer.c ****  */
  58:tmk_core/common/action_layer.c **** void default_layer_set(layer_state_t state) { default_layer_state_set(state); }
 153              		.loc 1 58 45 is_stmt 1 view -0
 154              		.cfi_startproc
 155              		@ args = 0, pretend = 0, frame = 0
 156              		@ frame_needed = 0, uses_anonymous_args = 0
 157              		@ link register save eliminated.
 158              		.loc 1 58 47 view .LVU29
 159 0000 FFF7FEBF 		b	default_layer_state_set
 160              	.LVL7:
 161              		.loc 1 58 47 is_stmt 0 view .LVU30
 162              		.cfi_endproc
 163              	.LFE7:
 165              		.section	.text.default_layer_or,"ax",%progbits
 166              		.align	1
 167              		.global	default_layer_or
 168              		.syntax unified
 169              		.thumb
 170              		.thumb_func
 171              		.fpu fpv4-sp-d16
 173              	default_layer_or:
 174              	.LVL8:
 175              	.LFB8:
  59:tmk_core/common/action_layer.c **** 
  60:tmk_core/common/action_layer.c **** #ifndef NO_ACTION_LAYER
  61:tmk_core/common/action_layer.c **** /** \brief Default Layer Or
  62:tmk_core/common/action_layer.c ****  *
  63:tmk_core/common/action_layer.c ****  * Turns on the default layer based on matching bits between specifed layer and existing layer stat
  64:tmk_core/common/action_layer.c ****  */
  65:tmk_core/common/action_layer.c **** void default_layer_or(layer_state_t state) { default_layer_state_set(default_layer_state | state); 
 176              		.loc 1 65 44 is_stmt 1 view -0
 177              		.cfi_startproc
 178              		@ args = 0, pretend = 0, frame = 0
 179              		@ frame_needed = 0, uses_anonymous_args = 0
 180              		@ link register save eliminated.
 181              		.loc 1 65 46 view .LVU32
 182 0000 024B     		ldr	r3, .L9
 183 0002 1B68     		ldr	r3, [r3]
 184 0004 1843     		orrs	r0, r0, r3
 185              	.LVL9:
 186              		.loc 1 65 46 is_stmt 0 view .LVU33
 187 0006 FFF7FEBF 		b	default_layer_state_set
 188              	.LVL10:
 189              	.L10:
 190 000a 00BF     		.align	2
 191              	.L9:
 192 000c 00000000 		.word	.LANCHOR0
 193              		.cfi_endproc
 194              	.LFE8:
 196              		.section	.text.default_layer_and,"ax",%progbits
 197              		.align	1
 198              		.global	default_layer_and
 199              		.syntax unified
 200              		.thumb
 201              		.thumb_func
 202              		.fpu fpv4-sp-d16
 204              	default_layer_and:
 205              	.LVL11:
 206              	.LFB9:
  66:tmk_core/common/action_layer.c **** /** \brief Default Layer And
  67:tmk_core/common/action_layer.c ****  *
  68:tmk_core/common/action_layer.c ****  * Turns on default layer based on matching enabled bits between specifed layer and existing layer 
  69:tmk_core/common/action_layer.c ****  */
  70:tmk_core/common/action_layer.c **** void default_layer_and(layer_state_t state) { default_layer_state_set(default_layer_state & state);
 207              		.loc 1 70 45 is_stmt 1 view -0
 208              		.cfi_startproc
 209              		@ args = 0, pretend = 0, frame = 0
 210              		@ frame_needed = 0, uses_anonymous_args = 0
 211              		@ link register save eliminated.
 212              		.loc 1 70 47 view .LVU35
 213 0000 024B     		ldr	r3, .L12
 214 0002 1B68     		ldr	r3, [r3]
 215 0004 1840     		ands	r0, r0, r3
 216              	.LVL12:
 217              		.loc 1 70 47 is_stmt 0 view .LVU36
 218 0006 FFF7FEBF 		b	default_layer_state_set
 219              	.LVL13:
 220              	.L13:
 221 000a 00BF     		.align	2
 222              	.L12:
 223 000c 00000000 		.word	.LANCHOR0
 224              		.cfi_endproc
 225              	.LFE9:
 227              		.section	.text.default_layer_xor,"ax",%progbits
 228              		.align	1
 229              		.global	default_layer_xor
 230              		.syntax unified
 231              		.thumb
 232              		.thumb_func
 233              		.fpu fpv4-sp-d16
 235              	default_layer_xor:
 236              	.LVL14:
 237              	.LFB10:
  71:tmk_core/common/action_layer.c **** /** \brief Default Layer Xor
  72:tmk_core/common/action_layer.c ****  *
  73:tmk_core/common/action_layer.c ****  * Turns on default layer based on non-matching bits between specifed layer and existing layer stat
  74:tmk_core/common/action_layer.c ****  */
  75:tmk_core/common/action_layer.c **** void default_layer_xor(layer_state_t state) { default_layer_state_set(default_layer_state ^ state);
 238              		.loc 1 75 45 is_stmt 1 view -0
 239              		.cfi_startproc
 240              		@ args = 0, pretend = 0, frame = 0
 241              		@ frame_needed = 0, uses_anonymous_args = 0
 242              		@ link register save eliminated.
 243              		.loc 1 75 47 view .LVU38
 244 0000 024B     		ldr	r3, .L15
 245 0002 1B68     		ldr	r3, [r3]
 246 0004 5840     		eors	r0, r0, r3
 247              	.LVL15:
 248              		.loc 1 75 47 is_stmt 0 view .LVU39
 249 0006 FFF7FEBF 		b	default_layer_state_set
 250              	.LVL16:
 251              	.L16:
 252 000a 00BF     		.align	2
 253              	.L15:
 254 000c 00000000 		.word	.LANCHOR0
 255              		.cfi_endproc
 256              	.LFE10:
 258              		.section	.text.layer_state_set_user,"ax",%progbits
 259              		.align	1
 260              		.weak	layer_state_set_user
 261              		.syntax unified
 262              		.thumb
 263              		.thumb_func
 264              		.fpu fpv4-sp-d16
 266              	layer_state_set_user:
 267              	.LFB33:
 268              		.cfi_startproc
 269              		@ args = 0, pretend = 0, frame = 0
 270              		@ frame_needed = 0, uses_anonymous_args = 0
 271              		@ link register save eliminated.
 272 0000 7047     		bx	lr
 273              		.cfi_endproc
 274              	.LFE33:
 276              		.section	.text.layer_state_set_kb,"ax",%progbits
 277              		.align	1
 278              		.weak	layer_state_set_kb
 279              		.syntax unified
 280              		.thumb
 281              		.thumb_func
 282              		.fpu fpv4-sp-d16
 284              	layer_state_set_kb:
 285              	.LVL17:
 286              	.LFB12:
  76:tmk_core/common/action_layer.c **** #endif
  77:tmk_core/common/action_layer.c **** 
  78:tmk_core/common/action_layer.c **** #ifndef NO_ACTION_LAYER
  79:tmk_core/common/action_layer.c **** /** \brief Keymap Layer State
  80:tmk_core/common/action_layer.c ****  */
  81:tmk_core/common/action_layer.c **** layer_state_t layer_state = 0;
  82:tmk_core/common/action_layer.c **** 
  83:tmk_core/common/action_layer.c **** /** \brief Layer state set user
  84:tmk_core/common/action_layer.c ****  *
  85:tmk_core/common/action_layer.c ****  * Runs user code on layer state change
  86:tmk_core/common/action_layer.c ****  */
  87:tmk_core/common/action_layer.c **** __attribute__((weak)) layer_state_t layer_state_set_user(layer_state_t state) { return state; }
  88:tmk_core/common/action_layer.c **** 
  89:tmk_core/common/action_layer.c **** /** \brief Layer state set keyboard
  90:tmk_core/common/action_layer.c ****  *
  91:tmk_core/common/action_layer.c ****  * Runs keyboard code on layer state change
  92:tmk_core/common/action_layer.c ****  */
  93:tmk_core/common/action_layer.c **** __attribute__((weak)) layer_state_t layer_state_set_kb(layer_state_t state) { return layer_state_se
 287              		.loc 1 93 77 is_stmt 1 view -0
 288              		.cfi_startproc
 289              		@ args = 0, pretend = 0, frame = 0
 290              		@ frame_needed = 0, uses_anonymous_args = 0
 291              		.loc 1 93 79 view .LVU41
 292              		.loc 1 93 77 is_stmt 0 view .LVU42
 293 0000 08B5     		push	{r3, lr}
 294              		.cfi_def_cfa_offset 8
 295              		.cfi_offset 3, -8
 296              		.cfi_offset 14, -4
 297              		.loc 1 93 86 view .LVU43
 298 0002 FFF7FEFF 		bl	layer_state_set_user
 299              	.LVL18:
 300              		.loc 1 93 115 view .LVU44
 301 0006 08BD     		pop	{r3, pc}
 302              		.cfi_endproc
 303              	.LFE12:
 305              		.section	.text.layer_state_set,"ax",%progbits
 306              		.align	1
 307              		.global	layer_state_set
 308              		.syntax unified
 309              		.thumb
 310              		.thumb_func
 311              		.fpu fpv4-sp-d16
 313              	layer_state_set:
 314              	.LVL19:
 315              	.LFB13:
  94:tmk_core/common/action_layer.c **** 
  95:tmk_core/common/action_layer.c **** /** \brief Layer state set
  96:tmk_core/common/action_layer.c ****  *
  97:tmk_core/common/action_layer.c ****  * Sets the layer to match the specifed state (a bitmask)
  98:tmk_core/common/action_layer.c ****  */
  99:tmk_core/common/action_layer.c **** void layer_state_set(layer_state_t state) {
 316              		.loc 1 99 43 is_stmt 1 view -0
 317              		.cfi_startproc
 318              		@ args = 0, pretend = 0, frame = 0
 319              		@ frame_needed = 0, uses_anonymous_args = 0
 100:tmk_core/common/action_layer.c ****     state = layer_state_set_kb(state);
 320              		.loc 1 100 5 view .LVU46
  99:tmk_core/common/action_layer.c ****     state = layer_state_set_kb(state);
 321              		.loc 1 99 43 is_stmt 0 view .LVU47
 322 0000 08B5     		push	{r3, lr}
 323              		.cfi_def_cfa_offset 8
 324              		.cfi_offset 3, -8
 325              		.cfi_offset 14, -4
 326              		.loc 1 100 13 view .LVU48
 327 0002 FFF7FEFF 		bl	layer_state_set_kb
 328              	.LVL20:
 101:tmk_core/common/action_layer.c ****     dprint("layer_state: ");
 329              		.loc 1 101 28 is_stmt 1 view .LVU49
 102:tmk_core/common/action_layer.c ****     layer_debug();
 330              		.loc 1 102 5 view .LVU50
 103:tmk_core/common/action_layer.c ****     dprint(" to ");
 104:tmk_core/common/action_layer.c ****     layer_state = state;
 105:tmk_core/common/action_layer.c ****     layer_debug();
 106:tmk_core/common/action_layer.c ****     dprintln();
 107:tmk_core/common/action_layer.c **** #    ifdef STRICT_LAYER_RELEASE
 108:tmk_core/common/action_layer.c ****     clear_keyboard_but_mods();  // To avoid stuck keys
 109:tmk_core/common/action_layer.c **** #    else
 110:tmk_core/common/action_layer.c ****     clear_keyboard_but_mods_and_keys();  // Don't reset held keys
 111:tmk_core/common/action_layer.c **** #    endif
 112:tmk_core/common/action_layer.c **** }
 113:tmk_core/common/action_layer.c **** 
 114:tmk_core/common/action_layer.c **** /** \brief Layer clear
 115:tmk_core/common/action_layer.c ****  *
 116:tmk_core/common/action_layer.c ****  * Turn off all layers
 117:tmk_core/common/action_layer.c ****  */
 118:tmk_core/common/action_layer.c **** void layer_clear(void) { layer_state_set(0); }
 119:tmk_core/common/action_layer.c **** 
 120:tmk_core/common/action_layer.c **** /** \brief Layer state is
 121:tmk_core/common/action_layer.c ****  *
 122:tmk_core/common/action_layer.c ****  * Return whether the given state is on (it might still be shadowed by a higher state, though)
 123:tmk_core/common/action_layer.c ****  */
 124:tmk_core/common/action_layer.c **** bool layer_state_is(uint8_t layer) { return layer_state_cmp(layer_state, layer); }
 125:tmk_core/common/action_layer.c **** 
 126:tmk_core/common/action_layer.c **** /** \brief Layer state compare
 127:tmk_core/common/action_layer.c ****  *
 128:tmk_core/common/action_layer.c ****  * Used for comparing layers {mostly used for unit testing}
 129:tmk_core/common/action_layer.c ****  */
 130:tmk_core/common/action_layer.c **** bool layer_state_cmp(layer_state_t cmp_layer_state, uint8_t layer) {
 131:tmk_core/common/action_layer.c ****     if (!cmp_layer_state) {
 132:tmk_core/common/action_layer.c ****         return layer == 0;
 133:tmk_core/common/action_layer.c ****     }
 134:tmk_core/common/action_layer.c ****     return (cmp_layer_state & ((layer_state_t)1 << layer)) != 0;
 135:tmk_core/common/action_layer.c **** }
 136:tmk_core/common/action_layer.c **** 
 137:tmk_core/common/action_layer.c **** /** \brief Layer move
 138:tmk_core/common/action_layer.c ****  *
 139:tmk_core/common/action_layer.c ****  * Turns on the given layer and turn off all other layers
 140:tmk_core/common/action_layer.c ****  */
 141:tmk_core/common/action_layer.c **** void layer_move(uint8_t layer) { layer_state_set((layer_state_t)1 << layer); }
 142:tmk_core/common/action_layer.c **** 
 143:tmk_core/common/action_layer.c **** /** \brief Layer on
 144:tmk_core/common/action_layer.c ****  *
 145:tmk_core/common/action_layer.c ****  * Turns on given layer
 146:tmk_core/common/action_layer.c ****  */
 147:tmk_core/common/action_layer.c **** void layer_on(uint8_t layer) { layer_state_set(layer_state | ((layer_state_t)1 << layer)); }
 148:tmk_core/common/action_layer.c **** 
 149:tmk_core/common/action_layer.c **** /** \brief Layer off
 150:tmk_core/common/action_layer.c ****  *
 151:tmk_core/common/action_layer.c ****  * Turns off given layer
 152:tmk_core/common/action_layer.c ****  */
 153:tmk_core/common/action_layer.c **** void layer_off(uint8_t layer) { layer_state_set(layer_state & ~((layer_state_t)1 << layer)); }
 154:tmk_core/common/action_layer.c **** 
 155:tmk_core/common/action_layer.c **** /** \brief Layer invert
 156:tmk_core/common/action_layer.c ****  *
 157:tmk_core/common/action_layer.c ****  * Toggle the given layer (set it if it's unset, or unset it if it's set)
 158:tmk_core/common/action_layer.c ****  */
 159:tmk_core/common/action_layer.c **** void layer_invert(uint8_t layer) { layer_state_set(layer_state ^ ((layer_state_t)1 << layer)); }
 160:tmk_core/common/action_layer.c **** 
 161:tmk_core/common/action_layer.c **** /** \brief Layer or
 162:tmk_core/common/action_layer.c ****  *
 163:tmk_core/common/action_layer.c ****  * Turns on layers based on matching bits between specifed layer and existing layer state
 164:tmk_core/common/action_layer.c ****  */
 165:tmk_core/common/action_layer.c **** void layer_or(layer_state_t state) { layer_state_set(layer_state | state); }
 166:tmk_core/common/action_layer.c **** /** \brief Layer and
 167:tmk_core/common/action_layer.c ****  *
 168:tmk_core/common/action_layer.c ****  * Turns on layers based on matching enabled bits between specifed layer and existing layer state
 169:tmk_core/common/action_layer.c ****  */
 170:tmk_core/common/action_layer.c **** void layer_and(layer_state_t state) { layer_state_set(layer_state & state); }
 171:tmk_core/common/action_layer.c **** /** \brief Layer xor
 172:tmk_core/common/action_layer.c ****  *
 173:tmk_core/common/action_layer.c ****  * Turns on layers based on non-matching bits between specifed layer and existing layer state
 174:tmk_core/common/action_layer.c ****  */
 175:tmk_core/common/action_layer.c **** void layer_xor(layer_state_t state) { layer_state_set(layer_state ^ state); }
 176:tmk_core/common/action_layer.c **** 
 177:tmk_core/common/action_layer.c **** /** \brief Layer debug printing
 178:tmk_core/common/action_layer.c ****  *
 179:tmk_core/common/action_layer.c ****  * Print out the hex value of the 32-bit layer state, as well as the value of the highest bit.
 180:tmk_core/common/action_layer.c ****  */
 181:tmk_core/common/action_layer.c **** void layer_debug(void) { dprintf("%08lX(%u)", layer_state, get_highest_layer(layer_state)); }
 331              		.loc 1 181 91 view .LVU51
 103:tmk_core/common/action_layer.c ****     dprint(" to ");
 332              		.loc 1 103 19 view .LVU52
 104:tmk_core/common/action_layer.c ****     layer_debug();
 333              		.loc 1 104 5 view .LVU53
 104:tmk_core/common/action_layer.c ****     layer_debug();
 334              		.loc 1 104 17 is_stmt 0 view .LVU54
 335 0006 034B     		ldr	r3, .L20
 336 0008 1860     		str	r0, [r3]
 105:tmk_core/common/action_layer.c ****     dprintln();
 337              		.loc 1 105 5 is_stmt 1 view .LVU55
 338              		.loc 1 181 91 view .LVU56
 106:tmk_core/common/action_layer.c **** #    ifdef STRICT_LAYER_RELEASE
 339              		.loc 1 106 15 view .LVU57
 110:tmk_core/common/action_layer.c **** #    endif
 340              		.loc 1 110 5 view .LVU58
 112:tmk_core/common/action_layer.c **** 
 341              		.loc 1 112 1 is_stmt 0 view .LVU59
 342 000a BDE80840 		pop	{r3, lr}
 343              		.cfi_restore 14
 344              		.cfi_restore 3
 345              		.cfi_def_cfa_offset 0
 110:tmk_core/common/action_layer.c **** #    endif
 346              		.loc 1 110 5 view .LVU60
 347 000e FFF7FEBF 		b	clear_keyboard_but_mods_and_keys
 348              	.LVL21:
 349              	.L21:
 110:tmk_core/common/action_layer.c **** #    endif
 350              		.loc 1 110 5 view .LVU61
 351 0012 00BF     		.align	2
 352              	.L20:
 353 0014 00000000 		.word	.LANCHOR1
 354              		.cfi_endproc
 355              	.LFE13:
 357              		.section	.text.layer_clear,"ax",%progbits
 358              		.align	1
 359              		.global	layer_clear
 360              		.syntax unified
 361              		.thumb
 362              		.thumb_func
 363              		.fpu fpv4-sp-d16
 365              	layer_clear:
 366              	.LFB14:
 118:tmk_core/common/action_layer.c **** 
 367              		.loc 1 118 24 is_stmt 1 view -0
 368              		.cfi_startproc
 369              		@ args = 0, pretend = 0, frame = 0
 370              		@ frame_needed = 0, uses_anonymous_args = 0
 371              		@ link register save eliminated.
 118:tmk_core/common/action_layer.c **** 
 372              		.loc 1 118 26 view .LVU63
 373 0000 0020     		movs	r0, #0
 374 0002 FFF7FEBF 		b	layer_state_set
 375              	.LVL22:
 376              		.cfi_endproc
 377              	.LFE14:
 379              		.section	.text.layer_state_is,"ax",%progbits
 380              		.align	1
 381              		.global	layer_state_is
 382              		.syntax unified
 383              		.thumb
 384              		.thumb_func
 385              		.fpu fpv4-sp-d16
 387              	layer_state_is:
 388              	.LVL23:
 389              	.LFB15:
 124:tmk_core/common/action_layer.c **** 
 390              		.loc 1 124 36 view -0
 391              		.cfi_startproc
 392              		@ args = 0, pretend = 0, frame = 0
 393              		@ frame_needed = 0, uses_anonymous_args = 0
 394              		@ link register save eliminated.
 124:tmk_core/common/action_layer.c **** 
 395              		.loc 1 124 38 view .LVU65
 124:tmk_core/common/action_layer.c **** 
 396              		.loc 1 124 45 is_stmt 0 view .LVU66
 397 0000 054B     		ldr	r3, .L26
 398 0002 1B68     		ldr	r3, [r3]
 399              	.LVL24:
 400              	.LBB12:
 401              	.LBI12:
 130:tmk_core/common/action_layer.c ****     if (!cmp_layer_state) {
 402              		.loc 1 130 6 is_stmt 1 view .LVU67
 403              	.LBB13:
 131:tmk_core/common/action_layer.c ****         return layer == 0;
 404              		.loc 1 131 5 view .LVU68
 131:tmk_core/common/action_layer.c ****         return layer == 0;
 405              		.loc 1 131 8 is_stmt 0 view .LVU69
 406 0004 1BB9     		cbnz	r3, .L24
 132:tmk_core/common/action_layer.c ****     }
 407              		.loc 1 132 9 is_stmt 1 view .LVU70
 132:tmk_core/common/action_layer.c ****     }
 408              		.loc 1 132 22 is_stmt 0 view .LVU71
 409 0006 B0FA80F0 		clz	r0, r0
 410              	.LVL25:
 132:tmk_core/common/action_layer.c ****     }
 411              		.loc 1 132 22 view .LVU72
 412 000a 4009     		lsrs	r0, r0, #5
 413 000c 7047     		bx	lr
 414              	.LVL26:
 415              	.L24:
 134:tmk_core/common/action_layer.c **** }
 416              		.loc 1 134 5 is_stmt 1 view .LVU73
 134:tmk_core/common/action_layer.c **** }
 417              		.loc 1 134 60 is_stmt 0 view .LVU74
 418 000e 23FA00F0 		lsr	r0, r3, r0
 419              	.LVL27:
 134:tmk_core/common/action_layer.c **** }
 420              		.loc 1 134 60 view .LVU75
 421 0012 00F00100 		and	r0, r0, #1
 422              	.LVL28:
 134:tmk_core/common/action_layer.c **** }
 423              		.loc 1 134 60 view .LVU76
 424              	.LBE13:
 425              	.LBE12:
 124:tmk_core/common/action_layer.c **** 
 426              		.loc 1 124 82 view .LVU77
 427 0016 7047     		bx	lr
 428              	.L27:
 429              		.align	2
 430              	.L26:
 431 0018 00000000 		.word	.LANCHOR1
 432              		.cfi_endproc
 433              	.LFE15:
 435              		.section	.text.layer_state_cmp,"ax",%progbits
 436              		.align	1
 437              		.global	layer_state_cmp
 438              		.syntax unified
 439              		.thumb
 440              		.thumb_func
 441              		.fpu fpv4-sp-d16
 443              	layer_state_cmp:
 444              	.LVL29:
 445              	.LFB16:
 130:tmk_core/common/action_layer.c ****     if (!cmp_layer_state) {
 446              		.loc 1 130 68 is_stmt 1 view -0
 447              		.cfi_startproc
 448              		@ args = 0, pretend = 0, frame = 0
 449              		@ frame_needed = 0, uses_anonymous_args = 0
 450              		@ link register save eliminated.
 131:tmk_core/common/action_layer.c ****         return layer == 0;
 451              		.loc 1 131 5 view .LVU79
 131:tmk_core/common/action_layer.c ****         return layer == 0;
 452              		.loc 1 131 8 is_stmt 0 view .LVU80
 453 0000 18B9     		cbnz	r0, .L29
 132:tmk_core/common/action_layer.c ****     }
 454              		.loc 1 132 9 is_stmt 1 view .LVU81
 132:tmk_core/common/action_layer.c ****     }
 455              		.loc 1 132 22 is_stmt 0 view .LVU82
 456 0002 B1FA81F0 		clz	r0, r1
 457              	.LVL30:
 132:tmk_core/common/action_layer.c ****     }
 458              		.loc 1 132 22 view .LVU83
 459 0006 4009     		lsrs	r0, r0, #5
 460 0008 7047     		bx	lr
 461              	.LVL31:
 462              	.L29:
 134:tmk_core/common/action_layer.c **** }
 463              		.loc 1 134 5 is_stmt 1 view .LVU84
 134:tmk_core/common/action_layer.c **** }
 464              		.loc 1 134 60 is_stmt 0 view .LVU85
 465 000a C840     		lsrs	r0, r0, r1
 466              	.LVL32:
 134:tmk_core/common/action_layer.c **** }
 467              		.loc 1 134 60 view .LVU86
 468 000c 00F00100 		and	r0, r0, #1
 135:tmk_core/common/action_layer.c **** 
 469              		.loc 1 135 1 view .LVU87
 470 0010 7047     		bx	lr
 471              		.cfi_endproc
 472              	.LFE16:
 474              		.section	.text.layer_move,"ax",%progbits
 475              		.align	1
 476              		.global	layer_move
 477              		.syntax unified
 478              		.thumb
 479              		.thumb_func
 480              		.fpu fpv4-sp-d16
 482              	layer_move:
 483              	.LVL33:
 484              	.LFB17:
 141:tmk_core/common/action_layer.c **** 
 485              		.loc 1 141 32 is_stmt 1 view -0
 486              		.cfi_startproc
 487              		@ args = 0, pretend = 0, frame = 0
 488              		@ frame_needed = 0, uses_anonymous_args = 0
 489              		@ link register save eliminated.
 141:tmk_core/common/action_layer.c **** 
 490              		.loc 1 141 34 view .LVU89
 491 0000 0123     		movs	r3, #1
 492 0002 03FA00F0 		lsl	r0, r3, r0
 493              	.LVL34:
 141:tmk_core/common/action_layer.c **** 
 494              		.loc 1 141 34 is_stmt 0 view .LVU90
 495 0006 FFF7FEBF 		b	layer_state_set
 496              	.LVL35:
 497              		.cfi_endproc
 498              	.LFE17:
 500              		.section	.text.layer_on,"ax",%progbits
 501              		.align	1
 502              		.global	layer_on
 503              		.syntax unified
 504              		.thumb
 505              		.thumb_func
 506              		.fpu fpv4-sp-d16
 508              	layer_on:
 509              	.LVL36:
 510              	.LFB18:
 147:tmk_core/common/action_layer.c **** 
 511              		.loc 1 147 30 is_stmt 1 view -0
 512              		.cfi_startproc
 513              		@ args = 0, pretend = 0, frame = 0
 514              		@ frame_needed = 0, uses_anonymous_args = 0
 515              		@ link register save eliminated.
 147:tmk_core/common/action_layer.c **** 
 516              		.loc 1 147 32 view .LVU92
 147:tmk_core/common/action_layer.c **** 
 517              		.loc 1 147 80 is_stmt 0 view .LVU93
 518 0000 0123     		movs	r3, #1
 519 0002 03FA00F0 		lsl	r0, r3, r0
 520              	.LVL37:
 147:tmk_core/common/action_layer.c **** 
 521              		.loc 1 147 32 view .LVU94
 522 0006 024B     		ldr	r3, .L33
 523 0008 1B68     		ldr	r3, [r3]
 524 000a 1843     		orrs	r0, r0, r3
 525 000c FFF7FEBF 		b	layer_state_set
 526              	.LVL38:
 527              	.L34:
 528              		.align	2
 529              	.L33:
 530 0010 00000000 		.word	.LANCHOR1
 531              		.cfi_endproc
 532              	.LFE18:
 534              		.section	.text.layer_off,"ax",%progbits
 535              		.align	1
 536              		.global	layer_off
 537              		.syntax unified
 538              		.thumb
 539              		.thumb_func
 540              		.fpu fpv4-sp-d16
 542              	layer_off:
 543              	.LVL39:
 544              	.LFB19:
 153:tmk_core/common/action_layer.c **** 
 545              		.loc 1 153 31 is_stmt 1 view -0
 546              		.cfi_startproc
 547              		@ args = 0, pretend = 0, frame = 0
 548              		@ frame_needed = 0, uses_anonymous_args = 0
 549              		@ link register save eliminated.
 153:tmk_core/common/action_layer.c **** 
 550              		.loc 1 153 33 view .LVU96
 153:tmk_core/common/action_layer.c **** 
 551              		.loc 1 153 82 is_stmt 0 view .LVU97
 552 0000 0123     		movs	r3, #1
 553 0002 03FA00F0 		lsl	r0, r3, r0
 554              	.LVL40:
 153:tmk_core/common/action_layer.c **** 
 555              		.loc 1 153 33 view .LVU98
 556 0006 034B     		ldr	r3, .L36
 557 0008 1B68     		ldr	r3, [r3]
 558 000a 23EA0000 		bic	r0, r3, r0
 559 000e FFF7FEBF 		b	layer_state_set
 560              	.LVL41:
 561              	.L37:
 562 0012 00BF     		.align	2
 563              	.L36:
 564 0014 00000000 		.word	.LANCHOR1
 565              		.cfi_endproc
 566              	.LFE19:
 568              		.section	.text.layer_invert,"ax",%progbits
 569              		.align	1
 570              		.global	layer_invert
 571              		.syntax unified
 572              		.thumb
 573              		.thumb_func
 574              		.fpu fpv4-sp-d16
 576              	layer_invert:
 577              	.LVL42:
 578              	.LFB20:
 159:tmk_core/common/action_layer.c **** 
 579              		.loc 1 159 34 is_stmt 1 view -0
 580              		.cfi_startproc
 581              		@ args = 0, pretend = 0, frame = 0
 582              		@ frame_needed = 0, uses_anonymous_args = 0
 583              		@ link register save eliminated.
 159:tmk_core/common/action_layer.c **** 
 584              		.loc 1 159 36 view .LVU100
 159:tmk_core/common/action_layer.c **** 
 585              		.loc 1 159 84 is_stmt 0 view .LVU101
 586 0000 0123     		movs	r3, #1
 587 0002 03FA00F0 		lsl	r0, r3, r0
 588              	.LVL43:
 159:tmk_core/common/action_layer.c **** 
 589              		.loc 1 159 36 view .LVU102
 590 0006 024B     		ldr	r3, .L39
 591 0008 1B68     		ldr	r3, [r3]
 592 000a 5840     		eors	r0, r0, r3
 593 000c FFF7FEBF 		b	layer_state_set
 594              	.LVL44:
 595              	.L40:
 596              		.align	2
 597              	.L39:
 598 0010 00000000 		.word	.LANCHOR1
 599              		.cfi_endproc
 600              	.LFE20:
 602              		.section	.text.layer_or,"ax",%progbits
 603              		.align	1
 604              		.global	layer_or
 605              		.syntax unified
 606              		.thumb
 607              		.thumb_func
 608              		.fpu fpv4-sp-d16
 610              	layer_or:
 611              	.LVL45:
 612              	.LFB21:
 165:tmk_core/common/action_layer.c **** /** \brief Layer and
 613              		.loc 1 165 36 is_stmt 1 view -0
 614              		.cfi_startproc
 615              		@ args = 0, pretend = 0, frame = 0
 616              		@ frame_needed = 0, uses_anonymous_args = 0
 617              		@ link register save eliminated.
 165:tmk_core/common/action_layer.c **** /** \brief Layer and
 618              		.loc 1 165 38 view .LVU104
 619 0000 024B     		ldr	r3, .L42
 620 0002 1B68     		ldr	r3, [r3]
 621 0004 1843     		orrs	r0, r0, r3
 622              	.LVL46:
 165:tmk_core/common/action_layer.c **** /** \brief Layer and
 623              		.loc 1 165 38 is_stmt 0 view .LVU105
 624 0006 FFF7FEBF 		b	layer_state_set
 625              	.LVL47:
 626              	.L43:
 627 000a 00BF     		.align	2
 628              	.L42:
 629 000c 00000000 		.word	.LANCHOR1
 630              		.cfi_endproc
 631              	.LFE21:
 633              		.section	.text.layer_and,"ax",%progbits
 634              		.align	1
 635              		.global	layer_and
 636              		.syntax unified
 637              		.thumb
 638              		.thumb_func
 639              		.fpu fpv4-sp-d16
 641              	layer_and:
 642              	.LVL48:
 643              	.LFB22:
 170:tmk_core/common/action_layer.c **** /** \brief Layer xor
 644              		.loc 1 170 37 is_stmt 1 view -0
 645              		.cfi_startproc
 646              		@ args = 0, pretend = 0, frame = 0
 647              		@ frame_needed = 0, uses_anonymous_args = 0
 648              		@ link register save eliminated.
 170:tmk_core/common/action_layer.c **** /** \brief Layer xor
 649              		.loc 1 170 39 view .LVU107
 650 0000 024B     		ldr	r3, .L45
 651 0002 1B68     		ldr	r3, [r3]
 652 0004 1840     		ands	r0, r0, r3
 653              	.LVL49:
 170:tmk_core/common/action_layer.c **** /** \brief Layer xor
 654              		.loc 1 170 39 is_stmt 0 view .LVU108
 655 0006 FFF7FEBF 		b	layer_state_set
 656              	.LVL50:
 657              	.L46:
 658 000a 00BF     		.align	2
 659              	.L45:
 660 000c 00000000 		.word	.LANCHOR1
 661              		.cfi_endproc
 662              	.LFE22:
 664              		.section	.text.layer_xor,"ax",%progbits
 665              		.align	1
 666              		.global	layer_xor
 667              		.syntax unified
 668              		.thumb
 669              		.thumb_func
 670              		.fpu fpv4-sp-d16
 672              	layer_xor:
 673              	.LVL51:
 674              	.LFB23:
 175:tmk_core/common/action_layer.c **** 
 675              		.loc 1 175 37 is_stmt 1 view -0
 676              		.cfi_startproc
 677              		@ args = 0, pretend = 0, frame = 0
 678              		@ frame_needed = 0, uses_anonymous_args = 0
 679              		@ link register save eliminated.
 175:tmk_core/common/action_layer.c **** 
 680              		.loc 1 175 39 view .LVU110
 681 0000 024B     		ldr	r3, .L48
 682 0002 1B68     		ldr	r3, [r3]
 683 0004 5840     		eors	r0, r0, r3
 684              	.LVL52:
 175:tmk_core/common/action_layer.c **** 
 685              		.loc 1 175 39 is_stmt 0 view .LVU111
 686 0006 FFF7FEBF 		b	layer_state_set
 687              	.LVL53:
 688              	.L49:
 689 000a 00BF     		.align	2
 690              	.L48:
 691 000c 00000000 		.word	.LANCHOR1
 692              		.cfi_endproc
 693              	.LFE23:
 695              		.section	.text.layer_debug,"ax",%progbits
 696              		.align	1
 697              		.global	layer_debug
 698              		.syntax unified
 699              		.thumb
 700              		.thumb_func
 701              		.fpu fpv4-sp-d16
 703              	layer_debug:
 704              	.LFB31:
 705              		.cfi_startproc
 706              		@ args = 0, pretend = 0, frame = 0
 707              		@ frame_needed = 0, uses_anonymous_args = 0
 708              		@ link register save eliminated.
 709 0000 7047     		bx	lr
 710              		.cfi_endproc
 711              	.LFE31:
 713              		.section	.text.update_source_layers_cache,"ax",%progbits
 714              		.align	1
 715              		.global	update_source_layers_cache
 716              		.syntax unified
 717              		.thumb
 718              		.thumb_func
 719              		.fpu fpv4-sp-d16
 721              	update_source_layers_cache:
 722              	.LVL54:
 723              	.LFB25:
 182:tmk_core/common/action_layer.c **** #endif
 183:tmk_core/common/action_layer.c **** 
 184:tmk_core/common/action_layer.c **** #if !defined(NO_ACTION_LAYER) && !defined(STRICT_LAYER_RELEASE)
 185:tmk_core/common/action_layer.c **** /** \brief source layer cache
 186:tmk_core/common/action_layer.c ****  */
 187:tmk_core/common/action_layer.c **** 
 188:tmk_core/common/action_layer.c **** uint8_t source_layers_cache[(MATRIX_ROWS * MATRIX_COLS + 7) / 8][MAX_LAYER_BITS] = {{0}};
 189:tmk_core/common/action_layer.c **** 
 190:tmk_core/common/action_layer.c **** /** \brief update source layers cache
 191:tmk_core/common/action_layer.c ****  *
 192:tmk_core/common/action_layer.c ****  * Updates the cached keys when changing layers
 193:tmk_core/common/action_layer.c ****  */
 194:tmk_core/common/action_layer.c **** void update_source_layers_cache(keypos_t key, uint8_t layer) {
 724              		.loc 1 194 62 is_stmt 1 view -0
 725              		.cfi_startproc
 726              		@ args = 0, pretend = 0, frame = 8
 727              		@ frame_needed = 0, uses_anonymous_args = 0
 195:tmk_core/common/action_layer.c ****     const uint8_t key_number  = key.col + (key.row * MATRIX_COLS);
 728              		.loc 1 195 5 view .LVU113
 729              		.loc 1 195 41 is_stmt 0 view .LVU114
 730 0000 C0F30723 		ubfx	r3, r0, #8, #8
 194:tmk_core/common/action_layer.c ****     const uint8_t key_number  = key.col + (key.row * MATRIX_COLS);
 731              		.loc 1 194 62 view .LVU115
 732 0004 37B5     		push	{r0, r1, r2, r4, r5, lr}
 733              		.cfi_def_cfa_offset 24
 734              		.cfi_offset 4, -12
 735              		.cfi_offset 5, -8
 736              		.cfi_offset 14, -4
 737              		.loc 1 195 19 view .LVU116
 738 0006 00EBC303 		add	r3, r0, r3, lsl #3
 739              	.LVL55:
 196:tmk_core/common/action_layer.c ****     const uint8_t storage_row = key_number / 8;
 740              		.loc 1 196 5 is_stmt 1 view .LVU117
 197:tmk_core/common/action_layer.c ****     const uint8_t storage_bit = key_number % 8;
 741              		.loc 1 197 5 view .LVU118
 198:tmk_core/common/action_layer.c **** 
 199:tmk_core/common/action_layer.c ****     for (uint8_t bit_number = 0; bit_number < MAX_LAYER_BITS; bit_number++) {
 742              		.loc 1 199 5 view .LVU119
 743              	.LBB14:
 744              		.loc 1 199 10 view .LVU120
 745              		.loc 1 199 34 view .LVU121
 200:tmk_core/common/action_layer.c ****         source_layers_cache[storage_row][bit_number] ^= (-((layer & (1U << bit_number)) != 0) ^ sou
 746              		.loc 1 200 149 is_stmt 0 view .LVU122
 747 000a 0122     		movs	r2, #1
 748 000c 00F00700 		and	r0, r0, #7
 749 0010 8240     		lsls	r2, r2, r0
 750 0012 C3F3C400 		ubfx	r0, r3, #3, #5
 751 0016 0A4B     		ldr	r3, .L54
 752              	.LVL56:
 753              		.loc 1 200 149 view .LVU123
 754 0018 00EB8000 		add	r0, r0, r0, lsl #2
 755              		.loc 1 200 143 view .LVU124
 756 001c D2B2     		uxtb	r2, r2
 757 001e 1844     		add	r0, r0, r3
 758 0020 0024     		movs	r4, #0
 759              	.LVL57:
 760              	.L52:
 761              		.loc 1 200 9 is_stmt 1 discriminator 3 view .LVU125
 762              		.loc 1 200 54 is_stmt 0 discriminator 3 view .LVU126
 763 0022 0578     		ldrb	r5, [r0]	@ zero_extendqisi2
 764              		.loc 1 200 89 discriminator 3 view .LVU127
 765 0024 21FA04F3 		lsr	r3, r1, r4
 766              		.loc 1 200 95 discriminator 3 view .LVU128
 767 0028 43F30003 		sbfx	r3, r3, #0, #1
 768 002c 6B40     		eors	r3, r3, r5
 769              		.loc 1 200 143 discriminator 3 view .LVU129
 770 002e 1340     		ands	r3, r3, r2
 199:tmk_core/common/action_layer.c ****         source_layers_cache[storage_row][bit_number] ^= (-((layer & (1U << bit_number)) != 0) ^ sou
 771              		.loc 1 199 5 discriminator 3 view .LVU130
 772 0030 0134     		adds	r4, r4, #1
 773              	.LVL58:
 774              		.loc 1 200 54 discriminator 3 view .LVU131
 775 0032 6B40     		eors	r3, r3, r5
 199:tmk_core/common/action_layer.c ****         source_layers_cache[storage_row][bit_number] ^= (-((layer & (1U << bit_number)) != 0) ^ sou
 776              		.loc 1 199 5 discriminator 3 view .LVU132
 777 0034 052C     		cmp	r4, #5
 778              		.loc 1 200 54 discriminator 3 view .LVU133
 779 0036 00F8013B 		strb	r3, [r0], #1
 199:tmk_core/common/action_layer.c ****         source_layers_cache[storage_row][bit_number] ^= (-((layer & (1U << bit_number)) != 0) ^ sou
 780              		.loc 1 199 63 is_stmt 1 discriminator 3 view .LVU134
 199:tmk_core/common/action_layer.c ****         source_layers_cache[storage_row][bit_number] ^= (-((layer & (1U << bit_number)) != 0) ^ sou
 781              		.loc 1 199 34 discriminator 3 view .LVU135
 199:tmk_core/common/action_layer.c ****         source_layers_cache[storage_row][bit_number] ^= (-((layer & (1U << bit_number)) != 0) ^ sou
 782              		.loc 1 199 5 is_stmt 0 discriminator 3 view .LVU136
 783 003a F2D1     		bne	.L52
 784              	.LBE14:
 201:tmk_core/common/action_layer.c ****     }
 202:tmk_core/common/action_layer.c **** }
 785              		.loc 1 202 1 view .LVU137
 786 003c 03B0     		add	sp, sp, #12
 787              		.cfi_def_cfa_offset 12
 788              		@ sp needed
 789 003e 30BD     		pop	{r4, r5, pc}
 790              	.L55:
 791              		.align	2
 792              	.L54:
 793 0040 00000000 		.word	.LANCHOR2
 794              		.cfi_endproc
 795              	.LFE25:
 797              		.section	.text.read_source_layers_cache,"ax",%progbits
 798              		.align	1
 799              		.global	read_source_layers_cache
 800              		.syntax unified
 801              		.thumb
 802              		.thumb_func
 803              		.fpu fpv4-sp-d16
 805              	read_source_layers_cache:
 806              	.LFB26:
 203:tmk_core/common/action_layer.c **** 
 204:tmk_core/common/action_layer.c **** /** \brief read source layers cache
 205:tmk_core/common/action_layer.c ****  *
 206:tmk_core/common/action_layer.c ****  * reads the cached keys stored when the layer was changed
 207:tmk_core/common/action_layer.c ****  */
 208:tmk_core/common/action_layer.c **** uint8_t read_source_layers_cache(keypos_t key) {
 807              		.loc 1 208 48 is_stmt 1 view -0
 808              		.cfi_startproc
 809              		@ args = 0, pretend = 0, frame = 8
 810              		@ frame_needed = 0, uses_anonymous_args = 0
 209:tmk_core/common/action_layer.c ****     const uint8_t key_number  = key.col + (key.row * MATRIX_COLS);
 811              		.loc 1 209 5 view .LVU139
 812              		.loc 1 209 41 is_stmt 0 view .LVU140
 813 0000 C0F30723 		ubfx	r3, r0, #8, #8
 814              		.loc 1 209 19 view .LVU141
 815 0004 00EBC303 		add	r3, r0, r3, lsl #3
 816              	.LVL59:
 210:tmk_core/common/action_layer.c ****     const uint8_t storage_row = key_number / 8;
 817              		.loc 1 210 5 is_stmt 1 view .LVU142
 211:tmk_core/common/action_layer.c ****     const uint8_t storage_bit = key_number % 8;
 818              		.loc 1 211 5 view .LVU143
 819 0008 0B4A     		ldr	r2, .L59
 820 000a C3F3C403 		ubfx	r3, r3, #3, #5
 821              	.LVL60:
 208:tmk_core/common/action_layer.c ****     const uint8_t key_number  = key.col + (key.row * MATRIX_COLS);
 822              		.loc 1 208 48 is_stmt 0 view .LVU144
 823 000e 13B5     		push	{r0, r1, r4, lr}
 824              		.cfi_def_cfa_offset 16
 825              		.cfi_offset 4, -8
 826              		.cfi_offset 14, -4
 827 0010 03EB8303 		add	r3, r3, r3, lsl #2
 828              		.loc 1 211 19 view .LVU145
 829 0014 0021     		movs	r1, #0
 830 0016 00F00704 		and	r4, r0, #7
 831              	.LVL61:
 212:tmk_core/common/action_layer.c ****     uint8_t       layer       = 0;
 832              		.loc 1 212 5 is_stmt 1 view .LVU146
 213:tmk_core/common/action_layer.c **** 
 214:tmk_core/common/action_layer.c ****     for (uint8_t bit_number = 0; bit_number < MAX_LAYER_BITS; bit_number++) {
 833              		.loc 1 214 5 view .LVU147
 834              	.LBB15:
 835              		.loc 1 214 10 view .LVU148
 836              		.loc 1 214 34 view .LVU149
 837 001a 1344     		add	r3, r3, r2
 838              	.LBE15:
 212:tmk_core/common/action_layer.c ****     uint8_t       layer       = 0;
 839              		.loc 1 212 19 is_stmt 0 view .LVU150
 840 001c 0846     		mov	r0, r1
 841              	.LVL62:
 842              	.L57:
 843              	.LBB16:
 215:tmk_core/common/action_layer.c ****         layer |= ((source_layers_cache[storage_row][bit_number] & (1U << storage_bit)) != 0) << bit
 844              		.loc 1 215 9 is_stmt 1 discriminator 3 view .LVU151
 845              		.loc 1 215 52 is_stmt 0 discriminator 3 view .LVU152
 846 001e 13F8012B 		ldrb	r2, [r3], #1	@ zero_extendqisi2
 847              		.loc 1 215 88 discriminator 3 view .LVU153
 848 0022 E240     		lsrs	r2, r2, r4
 849 0024 02F00102 		and	r2, r2, #1
 850              		.loc 1 215 94 discriminator 3 view .LVU154
 851 0028 8A40     		lsls	r2, r2, r1
 214:tmk_core/common/action_layer.c ****         layer |= ((source_layers_cache[storage_row][bit_number] & (1U << storage_bit)) != 0) << bit
 852              		.loc 1 214 5 discriminator 3 view .LVU155
 853 002a 0131     		adds	r1, r1, #1
 854              	.LVL63:
 855              		.loc 1 215 15 discriminator 3 view .LVU156
 856 002c 1043     		orrs	r0, r0, r2
 857              	.LVL64:
 214:tmk_core/common/action_layer.c ****         layer |= ((source_layers_cache[storage_row][bit_number] & (1U << storage_bit)) != 0) << bit
 858              		.loc 1 214 5 discriminator 3 view .LVU157
 859 002e 0529     		cmp	r1, #5
 860              		.loc 1 215 15 discriminator 3 view .LVU158
 861 0030 C0B2     		uxtb	r0, r0
 862              	.LVL65:
 214:tmk_core/common/action_layer.c ****         layer |= ((source_layers_cache[storage_row][bit_number] & (1U << storage_bit)) != 0) << bit
 863              		.loc 1 214 63 is_stmt 1 discriminator 3 view .LVU159
 214:tmk_core/common/action_layer.c ****         layer |= ((source_layers_cache[storage_row][bit_number] & (1U << storage_bit)) != 0) << bit
 864              		.loc 1 214 34 discriminator 3 view .LVU160
 214:tmk_core/common/action_layer.c ****         layer |= ((source_layers_cache[storage_row][bit_number] & (1U << storage_bit)) != 0) << bit
 865              		.loc 1 214 5 is_stmt 0 discriminator 3 view .LVU161
 866 0032 F4D1     		bne	.L57
 867              	.LBE16:
 216:tmk_core/common/action_layer.c ****     }
 217:tmk_core/common/action_layer.c **** 
 218:tmk_core/common/action_layer.c ****     return layer;
 868              		.loc 1 218 5 is_stmt 1 view .LVU162
 219:tmk_core/common/action_layer.c **** }
 869              		.loc 1 219 1 is_stmt 0 view .LVU163
 870 0034 02B0     		add	sp, sp, #8
 871              		.cfi_def_cfa_offset 8
 872              		@ sp needed
 873 0036 10BD     		pop	{r4, pc}
 874              	.LVL66:
 875              	.L60:
 876              		.loc 1 219 1 view .LVU164
 877              		.align	2
 878              	.L59:
 879 0038 00000000 		.word	.LANCHOR2
 880              		.cfi_endproc
 881              	.LFE26:
 883              		.section	.text.layer_switch_get_layer,"ax",%progbits
 884              		.align	1
 885              		.global	layer_switch_get_layer
 886              		.syntax unified
 887              		.thumb
 888              		.thumb_func
 889              		.fpu fpv4-sp-d16
 891              	layer_switch_get_layer:
 892              	.LFB28:
 220:tmk_core/common/action_layer.c **** #endif
 221:tmk_core/common/action_layer.c **** 
 222:tmk_core/common/action_layer.c **** /** \brief Store or get action (FIXME: Needs better summary)
 223:tmk_core/common/action_layer.c ****  *
 224:tmk_core/common/action_layer.c ****  * Make sure the action triggered when the key is released is the same
 225:tmk_core/common/action_layer.c ****  * one as the one triggered on press. It's important for the mod keys
 226:tmk_core/common/action_layer.c ****  * when the layer is switched after the down event but before the up
 227:tmk_core/common/action_layer.c ****  * event as they may get stuck otherwise.
 228:tmk_core/common/action_layer.c ****  */
 229:tmk_core/common/action_layer.c **** action_t store_or_get_action(bool pressed, keypos_t key) {
 230:tmk_core/common/action_layer.c **** #if !defined(NO_ACTION_LAYER) && !defined(STRICT_LAYER_RELEASE)
 231:tmk_core/common/action_layer.c ****     if (disable_action_cache) {
 232:tmk_core/common/action_layer.c ****         return layer_switch_get_action(key);
 233:tmk_core/common/action_layer.c ****     }
 234:tmk_core/common/action_layer.c **** 
 235:tmk_core/common/action_layer.c ****     uint8_t layer;
 236:tmk_core/common/action_layer.c **** 
 237:tmk_core/common/action_layer.c ****     if (pressed) {
 238:tmk_core/common/action_layer.c ****         layer = layer_switch_get_layer(key);
 239:tmk_core/common/action_layer.c ****         update_source_layers_cache(key, layer);
 240:tmk_core/common/action_layer.c ****     } else {
 241:tmk_core/common/action_layer.c ****         layer = read_source_layers_cache(key);
 242:tmk_core/common/action_layer.c ****     }
 243:tmk_core/common/action_layer.c ****     return action_for_key(layer, key);
 244:tmk_core/common/action_layer.c **** #else
 245:tmk_core/common/action_layer.c ****     return layer_switch_get_action(key);
 246:tmk_core/common/action_layer.c **** #endif
 247:tmk_core/common/action_layer.c **** }
 248:tmk_core/common/action_layer.c **** 
 249:tmk_core/common/action_layer.c **** /** \brief Layer switch get layer
 250:tmk_core/common/action_layer.c ****  *
 251:tmk_core/common/action_layer.c ****  * Gets the layer based on key info
 252:tmk_core/common/action_layer.c ****  */
 253:tmk_core/common/action_layer.c **** uint8_t layer_switch_get_layer(keypos_t key) {
 893              		.loc 1 253 46 is_stmt 1 view -0
 894              		.cfi_startproc
 895              		@ args = 0, pretend = 0, frame = 8
 896              		@ frame_needed = 0, uses_anonymous_args = 0
 254:tmk_core/common/action_layer.c **** #ifndef NO_ACTION_LAYER
 255:tmk_core/common/action_layer.c ****     action_t action;
 897              		.loc 1 255 5 view .LVU166
 256:tmk_core/common/action_layer.c ****     action.code = ACTION_TRANSPARENT;
 898              		.loc 1 256 5 view .LVU167
 899              	.LVL67:
 257:tmk_core/common/action_layer.c **** 
 258:tmk_core/common/action_layer.c ****     layer_state_t layers = layer_state | default_layer_state;
 900              		.loc 1 258 5 view .LVU168
 901              		.loc 1 258 19 is_stmt 0 view .LVU169
 902 0000 0D4B     		ldr	r3, .L70
 253:tmk_core/common/action_layer.c **** #ifndef NO_ACTION_LAYER
 903              		.loc 1 253 46 view .LVU170
 904 0002 73B5     		push	{r0, r1, r4, r5, r6, lr}
 905              		.cfi_def_cfa_offset 24
 906              		.cfi_offset 4, -16
 907              		.cfi_offset 5, -12
 908              		.cfi_offset 6, -8
 909              		.cfi_offset 14, -4
 910              		.loc 1 258 19 view .LVU171
 911 0004 1E68     		ldr	r6, [r3]
 912 0006 0D4B     		ldr	r3, .L70+4
 253:tmk_core/common/action_layer.c **** #ifndef NO_ACTION_LAYER
 913              		.loc 1 253 46 view .LVU172
 914 0008 ADF80400 		strh	r0, [sp, #4]	@ movhi
 915              		.loc 1 258 19 view .LVU173
 916 000c 1B68     		ldr	r3, [r3]
 917 000e 1F24     		movs	r4, #31
 918 0010 1E43     		orrs	r6, r6, r3
 919              	.LVL68:
 259:tmk_core/common/action_layer.c ****     /* check top layer first */
 260:tmk_core/common/action_layer.c ****     for (int8_t i = MAX_LAYER - 1; i >= 0; i--) {
 920              		.loc 1 260 5 is_stmt 1 view .LVU174
 921              	.LBB17:
 922              		.loc 1 260 10 view .LVU175
 923              		.loc 1 260 36 view .LVU176
 924              	.L63:
 261:tmk_core/common/action_layer.c ****         if (layers & ((layer_state_t)1 << i)) {
 925              		.loc 1 261 9 view .LVU177
 926              		.loc 1 261 13 is_stmt 0 view .LVU178
 927 0012 26FA04F3 		lsr	r3, r6, r4
 928              		.loc 1 261 12 view .LVU179
 929 0016 DB07     		lsls	r3, r3, #31
 930 0018 E5B2     		uxtb	r5, r4
 931 001a 05D4     		bmi	.L62
 932              	.L65:
 260:tmk_core/common/action_layer.c ****         if (layers & ((layer_state_t)1 << i)) {
 933              		.loc 1 260 44 is_stmt 1 view .LVU180
 934              	.LVL69:
 260:tmk_core/common/action_layer.c ****         if (layers & ((layer_state_t)1 << i)) {
 935              		.loc 1 260 36 view .LVU181
 260:tmk_core/common/action_layer.c ****         if (layers & ((layer_state_t)1 << i)) {
 936              		.loc 1 260 5 is_stmt 0 view .LVU182
 937 001c 013C     		subs	r4, r4, #1
 938              	.LVL70:
 260:tmk_core/common/action_layer.c ****         if (layers & ((layer_state_t)1 << i)) {
 939              		.loc 1 260 5 view .LVU183
 940 001e F8D2     		bcs	.L63
 941              	.LBE17:
 262:tmk_core/common/action_layer.c ****             action = action_for_key(i, key);
 263:tmk_core/common/action_layer.c ****             if (action.code != ACTION_TRANSPARENT) {
 264:tmk_core/common/action_layer.c ****                 return i;
 265:tmk_core/common/action_layer.c ****             }
 266:tmk_core/common/action_layer.c ****         }
 267:tmk_core/common/action_layer.c ****     }
 268:tmk_core/common/action_layer.c ****     /* fall back to layer 0 */
 269:tmk_core/common/action_layer.c ****     return 0;
 942              		.loc 1 269 12 view .LVU184
 943 0020 0025     		movs	r5, #0
 944              	.LVL71:
 945              	.L64:
 270:tmk_core/common/action_layer.c **** #else
 271:tmk_core/common/action_layer.c ****     return get_highest_layer(default_layer_state);
 272:tmk_core/common/action_layer.c **** #endif
 273:tmk_core/common/action_layer.c **** }
 946              		.loc 1 273 1 view .LVU185
 947 0022 2846     		mov	r0, r5
 948              	.LVL72:
 949              		.loc 1 273 1 view .LVU186
 950 0024 02B0     		add	sp, sp, #8
 951              		.cfi_remember_state
 952              		.cfi_def_cfa_offset 16
 953              		@ sp needed
 954 0026 70BD     		pop	{r4, r5, r6, pc}
 955              	.LVL73:
 956              	.L62:
 957              		.cfi_restore_state
 958              	.LBB18:
 262:tmk_core/common/action_layer.c ****             action = action_for_key(i, key);
 959              		.loc 1 262 13 is_stmt 1 view .LVU187
 262:tmk_core/common/action_layer.c ****             action = action_for_key(i, key);
 960              		.loc 1 262 22 is_stmt 0 view .LVU188
 961 0028 0199     		ldr	r1, [sp, #4]
 962 002a 2846     		mov	r0, r5
 963              	.LVL74:
 262:tmk_core/common/action_layer.c ****             action = action_for_key(i, key);
 964              		.loc 1 262 22 view .LVU189
 965 002c FFF7FEFF 		bl	action_for_key
 966              	.LVL75:
 263:tmk_core/common/action_layer.c ****                 return i;
 967              		.loc 1 263 13 is_stmt 1 view .LVU190
 263:tmk_core/common/action_layer.c ****                 return i;
 968              		.loc 1 263 16 is_stmt 0 view .LVU191
 969 0030 80B2     		uxth	r0, r0
 970              	.LVL76:
 263:tmk_core/common/action_layer.c ****                 return i;
 971              		.loc 1 263 16 view .LVU192
 972 0032 0128     		cmp	r0, #1
 973 0034 F2D0     		beq	.L65
 974 0036 F4E7     		b	.L64
 975              	.L71:
 976              		.align	2
 977              	.L70:
 978 0038 00000000 		.word	.LANCHOR1
 979 003c 00000000 		.word	.LANCHOR0
 980              	.LBE18:
 981              		.cfi_endproc
 982              	.LFE28:
 984              		.section	.text.layer_switch_get_action,"ax",%progbits
 985              		.align	1
 986              		.global	layer_switch_get_action
 987              		.syntax unified
 988              		.thumb
 989              		.thumb_func
 990              		.fpu fpv4-sp-d16
 992              	layer_switch_get_action:
 993              	.LFB29:
 274:tmk_core/common/action_layer.c **** 
 275:tmk_core/common/action_layer.c **** /** \brief Layer switch get layer
 276:tmk_core/common/action_layer.c ****  *
 277:tmk_core/common/action_layer.c ****  * Gets action code based on key position
 278:tmk_core/common/action_layer.c ****  */
 279:tmk_core/common/action_layer.c **** action_t layer_switch_get_action(keypos_t key) { return action_for_key(layer_switch_get_layer(key),
 994              		.loc 1 279 48 is_stmt 1 view -0
 995              		.cfi_startproc
 996              		@ args = 0, pretend = 0, frame = 8
 997              		@ frame_needed = 0, uses_anonymous_args = 0
 998              		.loc 1 279 50 view .LVU194
 999              		.loc 1 279 48 is_stmt 0 view .LVU195
 1000 0000 07B5     		push	{r0, r1, r2, lr}
 1001              		.cfi_def_cfa_offset 16
 1002              		.cfi_offset 14, -4
 1003              		.loc 1 279 48 view .LVU196
 1004 0002 ADF80400 		strh	r0, [sp, #4]	@ movhi
 1005              		.loc 1 279 57 view .LVU197
 1006 0006 0198     		ldr	r0, [sp, #4]
 1007 0008 FFF7FEFF 		bl	layer_switch_get_layer
 1008              	.LVL77:
 1009 000c 0199     		ldr	r1, [sp, #4]
 1010              		.loc 1 279 107 view .LVU198
 1011 000e 03B0     		add	sp, sp, #12
 1012              		.cfi_def_cfa_offset 4
 1013              		@ sp needed
 1014 0010 5DF804EB 		ldr	lr, [sp], #4
 1015              		.cfi_restore 14
 1016              		.cfi_def_cfa_offset 0
 1017              		.loc 1 279 57 view .LVU199
 1018 0014 FFF7FEBF 		b	action_for_key
 1019              	.LVL78:
 1020              		.cfi_endproc
 1021              	.LFE29:
 1023              		.section	.text.store_or_get_action,"ax",%progbits
 1024              		.align	1
 1025              		.global	store_or_get_action
 1026              		.syntax unified
 1027              		.thumb
 1028              		.thumb_func
 1029              		.fpu fpv4-sp-d16
 1031              	store_or_get_action:
 1032              	.LVL79:
 1033              	.LFB27:
 229:tmk_core/common/action_layer.c **** #if !defined(NO_ACTION_LAYER) && !defined(STRICT_LAYER_RELEASE)
 1034              		.loc 1 229 58 is_stmt 1 view -0
 1035              		.cfi_startproc
 1036              		@ args = 0, pretend = 0, frame = 8
 1037              		@ frame_needed = 0, uses_anonymous_args = 0
 231:tmk_core/common/action_layer.c ****         return layer_switch_get_action(key);
 1038              		.loc 1 231 5 view .LVU201
 229:tmk_core/common/action_layer.c **** #if !defined(NO_ACTION_LAYER) && !defined(STRICT_LAYER_RELEASE)
 1039              		.loc 1 229 58 is_stmt 0 view .LVU202
 1040 0000 13B5     		push	{r0, r1, r4, lr}
 1041              		.cfi_def_cfa_offset 16
 1042              		.cfi_offset 4, -8
 1043              		.cfi_offset 14, -4
 231:tmk_core/common/action_layer.c ****         return layer_switch_get_action(key);
 1044              		.loc 1 231 9 view .LVU203
 1045 0002 104B     		ldr	r3, .L77
 229:tmk_core/common/action_layer.c **** #if !defined(NO_ACTION_LAYER) && !defined(STRICT_LAYER_RELEASE)
 1046              		.loc 1 229 58 view .LVU204
 1047 0004 ADF80410 		strh	r1, [sp, #4]	@ movhi
 231:tmk_core/common/action_layer.c ****         return layer_switch_get_action(key);
 1048              		.loc 1 231 8 view .LVU205
 1049 0008 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1050 000a 2BB1     		cbz	r3, .L74
 232:tmk_core/common/action_layer.c ****     }
 1051              		.loc 1 232 9 is_stmt 1 view .LVU206
 232:tmk_core/common/action_layer.c ****     }
 1052              		.loc 1 232 16 is_stmt 0 view .LVU207
 1053 000c 0198     		ldr	r0, [sp, #4]
 1054              	.LVL80:
 247:tmk_core/common/action_layer.c **** 
 1055              		.loc 1 247 1 view .LVU208
 1056 000e 02B0     		add	sp, sp, #8
 1057              		.cfi_remember_state
 1058              		.cfi_def_cfa_offset 8
 1059              		@ sp needed
 1060 0010 BDE81040 		pop	{r4, lr}
 1061              		.cfi_restore 14
 1062              		.cfi_restore 4
 1063              		.cfi_def_cfa_offset 0
 232:tmk_core/common/action_layer.c ****     }
 1064              		.loc 1 232 16 view .LVU209
 1065 0014 FFF7FEBF 		b	layer_switch_get_action
 1066              	.LVL81:
 1067              	.L74:
 1068              		.cfi_restore_state
 235:tmk_core/common/action_layer.c **** 
 1069              		.loc 1 235 5 is_stmt 1 view .LVU210
 237:tmk_core/common/action_layer.c ****         layer = layer_switch_get_layer(key);
 1070              		.loc 1 237 5 view .LVU211
 237:tmk_core/common/action_layer.c ****         layer = layer_switch_get_layer(key);
 1071              		.loc 1 237 8 is_stmt 0 view .LVU212
 1072 0018 70B1     		cbz	r0, .L75
 238:tmk_core/common/action_layer.c ****         update_source_layers_cache(key, layer);
 1073              		.loc 1 238 9 is_stmt 1 view .LVU213
 238:tmk_core/common/action_layer.c ****         update_source_layers_cache(key, layer);
 1074              		.loc 1 238 17 is_stmt 0 view .LVU214
 1075 001a 0198     		ldr	r0, [sp, #4]
 1076              	.LVL82:
 238:tmk_core/common/action_layer.c ****         update_source_layers_cache(key, layer);
 1077              		.loc 1 238 17 view .LVU215
 1078 001c FFF7FEFF 		bl	layer_switch_get_layer
 1079              	.LVL83:
 1080 0020 0446     		mov	r4, r0
 1081              	.LVL84:
 239:tmk_core/common/action_layer.c ****     } else {
 1082              		.loc 1 239 9 is_stmt 1 view .LVU216
 1083 0022 0146     		mov	r1, r0
 1084 0024 0198     		ldr	r0, [sp, #4]
 1085              	.LVL85:
 239:tmk_core/common/action_layer.c ****     } else {
 1086              		.loc 1 239 9 is_stmt 0 view .LVU217
 1087 0026 FFF7FEFF 		bl	update_source_layers_cache
 1088              	.LVL86:
 1089              	.L76:
 243:tmk_core/common/action_layer.c **** #else
 1090              		.loc 1 243 5 is_stmt 1 view .LVU218
 243:tmk_core/common/action_layer.c **** #else
 1091              		.loc 1 243 12 is_stmt 0 view .LVU219
 1092 002a 0199     		ldr	r1, [sp, #4]
 1093 002c 2046     		mov	r0, r4
 247:tmk_core/common/action_layer.c **** 
 1094              		.loc 1 247 1 view .LVU220
 1095 002e 02B0     		add	sp, sp, #8
 1096              		.cfi_remember_state
 1097              		.cfi_def_cfa_offset 8
 1098              		@ sp needed
 1099 0030 BDE81040 		pop	{r4, lr}
 1100              		.cfi_restore 14
 1101              		.cfi_restore 4
 1102              		.cfi_def_cfa_offset 0
 1103              	.LVL87:
 243:tmk_core/common/action_layer.c **** #else
 1104              		.loc 1 243 12 view .LVU221
 1105 0034 FFF7FEBF 		b	action_for_key
 1106              	.LVL88:
 1107              	.L75:
 1108              		.cfi_restore_state
 241:tmk_core/common/action_layer.c ****     }
 1109              		.loc 1 241 9 is_stmt 1 view .LVU222
 241:tmk_core/common/action_layer.c ****     }
 1110              		.loc 1 241 17 is_stmt 0 view .LVU223
 1111 0038 0198     		ldr	r0, [sp, #4]
 1112              	.LVL89:
 241:tmk_core/common/action_layer.c ****     }
 1113              		.loc 1 241 17 view .LVU224
 1114 003a FFF7FEFF 		bl	read_source_layers_cache
 1115              	.LVL90:
 1116 003e 0446     		mov	r4, r0
 1117              	.LVL91:
 241:tmk_core/common/action_layer.c ****     }
 1118              		.loc 1 241 17 view .LVU225
 1119 0040 F3E7     		b	.L76
 1120              	.L78:
 1121 0042 00BF     		.align	2
 1122              	.L77:
 1123 0044 00000000 		.word	disable_action_cache
 1124              		.cfi_endproc
 1125              	.LFE27:
 1127              		.global	source_layers_cache
 1128              		.global	layer_state
 1129              		.global	default_layer_state
 1130              		.section	.bss.default_layer_state,"aw",%nobits
 1131              		.align	2
 1132              		.set	.LANCHOR0,. + 0
 1135              	default_layer_state:
 1136 0000 00000000 		.space	4
 1137              		.section	.bss.layer_state,"aw",%nobits
 1138              		.align	2
 1139              		.set	.LANCHOR1,. + 0
 1142              	layer_state:
 1143 0000 00000000 		.space	4
 1144              		.section	.bss.source_layers_cache,"aw",%nobits
 1145              		.set	.LANCHOR2,. + 0
 1148              	source_layers_cache:
 1149 0000 00000000 		.space	55
 1149      00000000 
 1149      00000000 
 1149      00000000 
 1149      00000000 
 1150              		.text
 1151              	.Letext0:
 1152              		.file 2 "c:\\qmk_msys\\mingw64\\arm-none-eabi\\include\\machine\\_default_types.h"
 1153              		.file 3 "c:\\qmk_msys\\mingw64\\arm-none-eabi\\include\\sys\\_stdint.h"
 1154              		.file 4 "tmk_core/common/keyboard.h"
 1155              		.file 5 "tmk_core/common/action_code.h"
 1156              		.file 6 "tmk_core/common/action_layer.h"
 1157              		.file 7 "tmk_core/common/action.h"
DEFINED SYMBOLS
                            *ABS*:0000000000000000 action_layer.c
C:\Users\lhanj\AppData\Local\Temp\ccGGPvFn.s:18     .text.default_layer_state_set_user:0000000000000000 $t
C:\Users\lhanj\AppData\Local\Temp\ccGGPvFn.s:26     .text.default_layer_state_set_user:0000000000000000 default_layer_state_set_user
C:\Users\lhanj\AppData\Local\Temp\ccGGPvFn.s:42     .text.default_layer_state_set_kb:0000000000000000 $t
C:\Users\lhanj\AppData\Local\Temp\ccGGPvFn.s:49     .text.default_layer_state_set_kb:0000000000000000 default_layer_state_set_kb
C:\Users\lhanj\AppData\Local\Temp\ccGGPvFn.s:71     .text.default_layer_state_set:0000000000000000 $t
C:\Users\lhanj\AppData\Local\Temp\ccGGPvFn.s:77     .text.default_layer_state_set:0000000000000000 default_layer_state_set
C:\Users\lhanj\AppData\Local\Temp\ccGGPvFn.s:117    .text.default_layer_state_set:0000000000000014 $d
C:\Users\lhanj\AppData\Local\Temp\ccGGPvFn.s:122    .text.default_layer_debug:0000000000000000 $t
C:\Users\lhanj\AppData\Local\Temp\ccGGPvFn.s:129    .text.default_layer_debug:0000000000000000 default_layer_debug
C:\Users\lhanj\AppData\Local\Temp\ccGGPvFn.s:143    .text.default_layer_set:0000000000000000 $t
C:\Users\lhanj\AppData\Local\Temp\ccGGPvFn.s:150    .text.default_layer_set:0000000000000000 default_layer_set
C:\Users\lhanj\AppData\Local\Temp\ccGGPvFn.s:166    .text.default_layer_or:0000000000000000 $t
C:\Users\lhanj\AppData\Local\Temp\ccGGPvFn.s:173    .text.default_layer_or:0000000000000000 default_layer_or
C:\Users\lhanj\AppData\Local\Temp\ccGGPvFn.s:192    .text.default_layer_or:000000000000000c $d
C:\Users\lhanj\AppData\Local\Temp\ccGGPvFn.s:197    .text.default_layer_and:0000000000000000 $t
C:\Users\lhanj\AppData\Local\Temp\ccGGPvFn.s:204    .text.default_layer_and:0000000000000000 default_layer_and
C:\Users\lhanj\AppData\Local\Temp\ccGGPvFn.s:223    .text.default_layer_and:000000000000000c $d
C:\Users\lhanj\AppData\Local\Temp\ccGGPvFn.s:228    .text.default_layer_xor:0000000000000000 $t
C:\Users\lhanj\AppData\Local\Temp\ccGGPvFn.s:235    .text.default_layer_xor:0000000000000000 default_layer_xor
C:\Users\lhanj\AppData\Local\Temp\ccGGPvFn.s:254    .text.default_layer_xor:000000000000000c $d
C:\Users\lhanj\AppData\Local\Temp\ccGGPvFn.s:259    .text.layer_state_set_user:0000000000000000 $t
C:\Users\lhanj\AppData\Local\Temp\ccGGPvFn.s:266    .text.layer_state_set_user:0000000000000000 layer_state_set_user
C:\Users\lhanj\AppData\Local\Temp\ccGGPvFn.s:277    .text.layer_state_set_kb:0000000000000000 $t
C:\Users\lhanj\AppData\Local\Temp\ccGGPvFn.s:284    .text.layer_state_set_kb:0000000000000000 layer_state_set_kb
C:\Users\lhanj\AppData\Local\Temp\ccGGPvFn.s:306    .text.layer_state_set:0000000000000000 $t
C:\Users\lhanj\AppData\Local\Temp\ccGGPvFn.s:313    .text.layer_state_set:0000000000000000 layer_state_set
C:\Users\lhanj\AppData\Local\Temp\ccGGPvFn.s:353    .text.layer_state_set:0000000000000014 $d
C:\Users\lhanj\AppData\Local\Temp\ccGGPvFn.s:358    .text.layer_clear:0000000000000000 $t
C:\Users\lhanj\AppData\Local\Temp\ccGGPvFn.s:365    .text.layer_clear:0000000000000000 layer_clear
C:\Users\lhanj\AppData\Local\Temp\ccGGPvFn.s:380    .text.layer_state_is:0000000000000000 $t
C:\Users\lhanj\AppData\Local\Temp\ccGGPvFn.s:387    .text.layer_state_is:0000000000000000 layer_state_is
C:\Users\lhanj\AppData\Local\Temp\ccGGPvFn.s:431    .text.layer_state_is:0000000000000018 $d
C:\Users\lhanj\AppData\Local\Temp\ccGGPvFn.s:436    .text.layer_state_cmp:0000000000000000 $t
C:\Users\lhanj\AppData\Local\Temp\ccGGPvFn.s:443    .text.layer_state_cmp:0000000000000000 layer_state_cmp
C:\Users\lhanj\AppData\Local\Temp\ccGGPvFn.s:475    .text.layer_move:0000000000000000 $t
C:\Users\lhanj\AppData\Local\Temp\ccGGPvFn.s:482    .text.layer_move:0000000000000000 layer_move
C:\Users\lhanj\AppData\Local\Temp\ccGGPvFn.s:501    .text.layer_on:0000000000000000 $t
C:\Users\lhanj\AppData\Local\Temp\ccGGPvFn.s:508    .text.layer_on:0000000000000000 layer_on
C:\Users\lhanj\AppData\Local\Temp\ccGGPvFn.s:530    .text.layer_on:0000000000000010 $d
C:\Users\lhanj\AppData\Local\Temp\ccGGPvFn.s:535    .text.layer_off:0000000000000000 $t
C:\Users\lhanj\AppData\Local\Temp\ccGGPvFn.s:542    .text.layer_off:0000000000000000 layer_off
C:\Users\lhanj\AppData\Local\Temp\ccGGPvFn.s:564    .text.layer_off:0000000000000014 $d
C:\Users\lhanj\AppData\Local\Temp\ccGGPvFn.s:569    .text.layer_invert:0000000000000000 $t
C:\Users\lhanj\AppData\Local\Temp\ccGGPvFn.s:576    .text.layer_invert:0000000000000000 layer_invert
C:\Users\lhanj\AppData\Local\Temp\ccGGPvFn.s:598    .text.layer_invert:0000000000000010 $d
C:\Users\lhanj\AppData\Local\Temp\ccGGPvFn.s:603    .text.layer_or:0000000000000000 $t
C:\Users\lhanj\AppData\Local\Temp\ccGGPvFn.s:610    .text.layer_or:0000000000000000 layer_or
C:\Users\lhanj\AppData\Local\Temp\ccGGPvFn.s:629    .text.layer_or:000000000000000c $d
C:\Users\lhanj\AppData\Local\Temp\ccGGPvFn.s:634    .text.layer_and:0000000000000000 $t
C:\Users\lhanj\AppData\Local\Temp\ccGGPvFn.s:641    .text.layer_and:0000000000000000 layer_and
C:\Users\lhanj\AppData\Local\Temp\ccGGPvFn.s:660    .text.layer_and:000000000000000c $d
C:\Users\lhanj\AppData\Local\Temp\ccGGPvFn.s:665    .text.layer_xor:0000000000000000 $t
C:\Users\lhanj\AppData\Local\Temp\ccGGPvFn.s:672    .text.layer_xor:0000000000000000 layer_xor
C:\Users\lhanj\AppData\Local\Temp\ccGGPvFn.s:691    .text.layer_xor:000000000000000c $d
C:\Users\lhanj\AppData\Local\Temp\ccGGPvFn.s:696    .text.layer_debug:0000000000000000 $t
C:\Users\lhanj\AppData\Local\Temp\ccGGPvFn.s:703    .text.layer_debug:0000000000000000 layer_debug
C:\Users\lhanj\AppData\Local\Temp\ccGGPvFn.s:714    .text.update_source_layers_cache:0000000000000000 $t
C:\Users\lhanj\AppData\Local\Temp\ccGGPvFn.s:721    .text.update_source_layers_cache:0000000000000000 update_source_layers_cache
C:\Users\lhanj\AppData\Local\Temp\ccGGPvFn.s:793    .text.update_source_layers_cache:0000000000000040 $d
C:\Users\lhanj\AppData\Local\Temp\ccGGPvFn.s:798    .text.read_source_layers_cache:0000000000000000 $t
C:\Users\lhanj\AppData\Local\Temp\ccGGPvFn.s:805    .text.read_source_layers_cache:0000000000000000 read_source_layers_cache
C:\Users\lhanj\AppData\Local\Temp\ccGGPvFn.s:879    .text.read_source_layers_cache:0000000000000038 $d
C:\Users\lhanj\AppData\Local\Temp\ccGGPvFn.s:884    .text.layer_switch_get_layer:0000000000000000 $t
C:\Users\lhanj\AppData\Local\Temp\ccGGPvFn.s:891    .text.layer_switch_get_layer:0000000000000000 layer_switch_get_layer
C:\Users\lhanj\AppData\Local\Temp\ccGGPvFn.s:978    .text.layer_switch_get_layer:0000000000000038 $d
C:\Users\lhanj\AppData\Local\Temp\ccGGPvFn.s:985    .text.layer_switch_get_action:0000000000000000 $t
C:\Users\lhanj\AppData\Local\Temp\ccGGPvFn.s:992    .text.layer_switch_get_action:0000000000000000 layer_switch_get_action
C:\Users\lhanj\AppData\Local\Temp\ccGGPvFn.s:1024   .text.store_or_get_action:0000000000000000 $t
C:\Users\lhanj\AppData\Local\Temp\ccGGPvFn.s:1031   .text.store_or_get_action:0000000000000000 store_or_get_action
C:\Users\lhanj\AppData\Local\Temp\ccGGPvFn.s:1123   .text.store_or_get_action:0000000000000044 $d
C:\Users\lhanj\AppData\Local\Temp\ccGGPvFn.s:1148   .bss.source_layers_cache:0000000000000000 source_layers_cache
C:\Users\lhanj\AppData\Local\Temp\ccGGPvFn.s:1142   .bss.layer_state:0000000000000000 layer_state
C:\Users\lhanj\AppData\Local\Temp\ccGGPvFn.s:1135   .bss.default_layer_state:0000000000000000 default_layer_state
C:\Users\lhanj\AppData\Local\Temp\ccGGPvFn.s:1131   .bss.default_layer_state:0000000000000000 $d
C:\Users\lhanj\AppData\Local\Temp\ccGGPvFn.s:1138   .bss.layer_state:0000000000000000 $d
C:\Users\lhanj\AppData\Local\Temp\ccGGPvFn.s:1149   .bss.source_layers_cache:0000000000000000 $d

UNDEFINED SYMBOLS
clear_keyboard_but_mods_and_keys
action_for_key
disable_action_cache
